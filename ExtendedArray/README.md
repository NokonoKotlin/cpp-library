# メチャデカ配列

## ライセンス
掲載したソースコードは MIT ライセンス (https://opensource.org/licenses/mit-license.php) で公開しています。ソースコードのコメントにライセンスが指示する条件 (以下 $2$ 点) を書いてあるので、消さずに使用してください。

- 著作者の表示
- ライセンスの全文またはライセンスの原文が掲載されたページへのリンク




### 使用例と機能
機能は先述の説明に加え、以下があります。
- `[i]` で $F[i]$ の値を返す。
- `GetRange(l,r)` は座標の半開区間 `[l,r)` をカバーする部分木の根のコピーを返す。`get()` 同様に、隣接頂点のポインタは封印されている。
    - `GetRange(l,r).Sum` のようにして `[l,r)` の持つ要素のモノイド積を取得する
- index の型と値の型の 2 つをテンプレートパラメータにとる。
- コンストラクタには値の範囲である `[l,r)` と、初期値の 3 つを渡す。

#### 初期化
```cpp

int main(){
    // 単体で初期化 (index の型と値の型の 2 つをテンプレートに渡す)
    // コンストラクタは index の範囲 [l,r) と初期化値の 3 つを渡す
    ExtendedArray<long long,long long> F(-1e18,1e18,2);
    
    // STL に乗せる場合
    // コピー/ムーブは禁止なので、デフォルトコンストラクタで初期化する
    vector<ExtendedArray<long long,long long>> EF(10);
    // 後で 1 つずつ Reset を呼び出して初期化
    for(auto& e : EF)e.Reset(-1e18,1e18,2);

    EF[0].Debug();// ちゃんと初期化されているか確認
}
```
##### 出力
```
DEBUG
L : -1000000000000000000 
R : 1000000000000000000 
V : 2 
```


#### いろんな操作
```cpp
int main(){
    ExtendedArray<long long,long long> F(-1e18,1e18,2);
    F.Debug();

    cout <<  "区間 [-28587273,577284) の範囲の要素を全て -1 に変更" << endl;
    F.RangeUpdate(-28587273,577284,-1);

    cout << endl;
    cout << "F[-1002994] = " << F[-1002994] << endl;
    cout << endl;

    cout << "区間 [48728,59928299387) の範囲の要素を全て 5 倍して 19 足す" << endl;
    F.RangeAffine(48728,59928299387,5,19);

    cout << endl;
    cout << "F[395837712] = " << F[395837712] << endl;
    cout << "F[188592] = " << F[188592] << endl;
    cout << endl;

    cout <<  "区間 [-577283,2995838) を右に 17772 だけ回転" << endl;
    F.circular_shift(-577283,2995838,1772372);

    cout << endl;
    cout << "F[188592] = " << F[188592] << endl;
    cout << endl;

    cout <<  "区間 [1200004020,588828588828) に -10 を挿入し、元々の区間を右に押しやる" << endl;
    F.RPush(1200004020,5888285838828,-10);

    cout << endl;
    cout << "F[2004928882893] = " << F[2004928882893] << endl;
    cout << endl;

    cout <<  "区間 [-29951200004020,588828588828293) の要素を全て削除し、" << endl;
    cout << "空いた空間を自身より右の要素で詰める。さらにその右にできた空きを 0 で埋める。" << endl;
    F.LErase(-29951200004020,588828588828293,0);

    cout << endl;
    F.Debug(); // デバッグ出力が少し見づらいのが難点
    cout << endl;

    cout << "区間 [104829833,999381220847266364) の総和クエリ -> " << F.GetRange(104829833,999381220847266364).Sum << endl;
}
```
##### 出力
```
DEBUG
L : -1000000000000000000 
R : 1000000000000000000 
V : 2 
区間 [-28587273,577284) の範囲の要素を全て -1 に変更

F[-1002994] = -1

区間 [48728,59928299387) の範囲の要素を全て 5 倍して 19 足す

F[395837712] = 29
F[188592] = 14

区間 [-577283,2995838) を右に 17772 だけ回転

F[188592] = 29

区間 [1200004020,588828588828) に -10 を挿入し、元々の区間を右に押しやる

F[2004928882893] = -10

区間 [-29951200004020,588828588828293) の要素を全て削除し、
空いた空間を自身より右の要素で詰める。さらにその右にできた空きを 0 で埋める。

DEBUG
L : -1000000000000000000 -29951200004020 999381220211167687 
R : -29951200004020 999381220211167687 1000000000000000000 
V : 2 2 0 

区間 [104829833,999381220847266364) の総和クエリ -> 1998762440212675708
```
